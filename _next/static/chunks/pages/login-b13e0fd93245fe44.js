(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return __webpack_require__(4754)}])},4754:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Login}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),next_router__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1163),_auth__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(995);function Login(param){let{setData}=param,[error,setError]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),router=(0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{JSON.parse(window.localStorage.getItem("data"))&&router.push("/")},[]);let setLogoin=async()=>{let authIns=await (0,_auth__WEBPACK_IMPORTED_MODULE_3__.Z)(),loginHandler=async(err,param)=>{let{data:code}=param;if(err){setError(err.message);return}let res=await fetch("/api/auth-lumin",{method:"POST",body:JSON.stringify({authorizationCode:code}),headers:{"Content-Type":"application/json"}}),data=await res.json();setData(data),localStorage.setItem("data",JSON.stringify(data)),authIns.off("login",loginHandler),router.push("/")};authIns.on("login",loginHandler),authIns.login("lumin")};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"AppButton",onClick:setLogoin,children:"Login with Lumin"}),error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:error})]})}}},function(__webpack_require__){__webpack_require__.O(0,[774,888,179],function(){return __webpack_require__(__webpack_require__.s=6429)}),_N_E=__webpack_require__.O()}]);