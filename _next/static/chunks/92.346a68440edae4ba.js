(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[92,153],{5153:function(__unused_webpack_module,exports){!function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=t(r(function(e){function t(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e1){return void r(e1)}c.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(o,i){var a=e.apply(r,n);function c(e){t(a,o,i,c,u,"next",e)}function u(e){t(a,o,i,c,u,"throw",e)}c(void 0)})}},e.exports.default=e.exports,e.exports.__esModule=!0})),o=t(r(function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0})),i=t(r(function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0})),a=r(function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0}),c=t(a),u=r(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(r,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0});t(u);var s=t(r(function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),l=r(function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),f=t(l),p=t(r(function(e){var t=l.default;e.exports=function(e,r){return r&&("object"===t(r)||"function"==typeof r)?r:a(e)},e.exports.default=e.exports,e.exports.__esModule=!0})),h=r(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),d=t(h),v=t(r(function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0})),y=r(function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e1){u=function(e,t,r){return e[t]=r}}function s(e,t1,r,n){var r1,n1,i=Object.create((t1&&t1.prototype instanceof y?t1:y).prototype),a=new P(n||[]);return i._invoke=(r1=a,n1=f,function(o,i){if(n1===h)throw Error("Generator is already running");if(n1===d){if("throw"===o)throw i;return T()}for(r1.method=o,r1.arg=i;;){var a=r1.delegate;if(a){var c=function O(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method))return v;r.method="throw",r.arg=TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,v)}(a,r1);if(c){if(c===v)continue;return c}}if("next"===r1.method)r1.sent=r1._sent=r1.arg;else if("throw"===r1.method){if(n1===f)throw n1=d,r1.arg;r1.dispatchException(r1.arg)}else"return"===r1.method&&r1.abrupt("return",r1.arg);n1=h;var u=l(e,r,r1);if("normal"===u.type){if(n1=r1.done?d:p,u.arg===v)continue;return{value:u.arg,done:r1.done}}"throw"===u.type&&(n1=d,r1.method="throw",r1.arg=u.arg)}}),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e1){return{type:"throw",arg:e1}}}e.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function g(){}function x(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,k=w&&w(w(j([])));k&&k!==r&&n.call(k,i)&&(m=k);var b=x.prototype=y.prototype=Object.create(m);function _(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function R(e,t){var o;this._invoke=function(e1,n1){function i(){return new t(function(t1,o){!function r(o,i,a,c){var u=l(e[o],e,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then(function(e){r("next",e,a,c)},function(e){r("throw",e,a,c)}):t.resolve(f).then(function(e){s.value=e,a(s)},function(e){return r("throw",e,a,c)})}c(u.arg)}(e1,n1,t1,o)})}return o=o?o.then(i,i):i()}}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=b.constructor=x,x.constructor=g,g.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,u(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(R.prototype),R.prototype[a]=function(){return this},e.AsyncIterator=R,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new R(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(b),u(b,c,"Generator"),b[i]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e1){Function("r","regeneratorRuntime = r")(t)}}),x=r(function(e){e.exports=function(e){return -1!==Function.toString.call(e).indexOf("[native code]")},e.exports.default=e.exports,e.exports.__esModule=!0});t(x);var m=r(function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0});t(m);var w=r(function(e){function t(r,n,o){return m()?(e.exports=t=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&u(o,r.prototype),o},e.exports.default=e.exports,e.exports.__esModule=!0),t.apply(null,arguments)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0});t(w);var b=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(e){var n,i=e.message,a=e.code;return o(this,r),v(c(n=t1.call(this,i)),"code",void 0),n.code=a,n}return r}(t(r(function(e){function t(r){var n="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!x(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return w(e,arguments,h(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),u(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}))(Error)),_=function(){function e(t){o(this,e),this.config=t||{}}return i(e,[{key:"required",value:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(function(t){return void 0===e.config[t]});if(o.length>0)throw new b({code:"missing_required_properties",message:"Missing the following required fields. (".concat(o.join(", "),")")})}}]),e}(),R=function(){function e(){o(this,e)}return i(e,null,[{key:"setup",value:function(t){var t1;this.hasSetup&&!t||(this.hasSetup=!0,this.interceptors=[],this.real||(this.real=window.fetch),window.fetch&&(window.fetch=(t1=n(y.mark(function t(r,n){var o,i,a;return y.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=r instanceof Request?r:new Request(r,n),i=0;case 2:if(!(i<e.interceptors.length)){t.next=9;break}return a=e.interceptors[i],t.next=6,Promise.resolve(a(o));case 6:i++,t.next=2;break;case 9:return t.abrupt("return",e.real.call(this,o));case 10:case"end":return t.stop()}},t,this)})),function(e,r){return t1.apply(this,arguments)})))}},{key:"add",value:function(e){this.setup(),this.interceptors.push(e)}}]),e}();v(R,"real",void 0),v(R,"hasSetup",!1),v(R,"interceptors",void 0);var O=!1,E=[];function S(){E.forEach(function(e){return e()})}var P=function(){function e(){o(this,e)}return i(e,null,[{key:"route",value:function(e){O||(window.addEventListener("popstate",S,{passive:!0}),window.addEventListener("click",S,{passive:!0}),setTimeout(S),O=!0),E.push(e)}},{key:"create",value:function(e,t){var r=document.createEvent("Event");return r.initEvent(e,t.bubbles||!1,t.cancelable||!0),r.detail=t.detail,r}},{key:"isCrossDomainError",value:function(e){return e instanceof DOMException||"Permission denied"===e.message}}]),e}(),j=function(){function e(){o(this,e)}return i(e,null,[{key:"setup",value:function(t){if(!this.hasSetup||t){this.hasSetup=!0,this.interceptors=[],this.realOpen||(this.realOpen=XMLHttpRequest.prototype.open),this.realSend||(this.realSend=XMLHttpRequest.prototype.send);var r=XMLHttpRequest.prototype;r.open=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[1];return this.$url=o,e.realOpen.apply(this,r)},r.send=function(t){for(var r=this,n=[],o=0;o<e.interceptors.length;o++){var i=e.interceptors[o];n.push(i(this,t))}Promise.all(n).then(function(){e.realSend.call(r,t)}).catch(function(e){r.dispatchEvent(P.create("error",{detail:e}))})}}}},{key:"add",value:function(e){this.setup(),this.interceptors.push(e)}}]),e}();v(j,"realOpen",void 0),v(j,"realSend",void 0),v(j,"hasSetup",!1),v(j,"interceptors",void 0);var T=Object.freeze({__proto__:null,Fetch:R,XHR:j}),M=r(function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0});t(M);var L=r(function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e1){c=!0,o=e1}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0});t(L);var $=r(function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0});t($);var A=r(function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0});t(A);var B=r(function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0});t(B);var q,U,I,D=t(r(function(e){e.exports=function(e,t){return M(e)||L(e,t)||A(e,t)||B()},e.exports.default=e.exports,e.exports.__esModule=!0})),C=function(){function e(){o(this,e)}return i(e,null,[{key:"origin",get:function(){return"".concat(location.protocol,"//").concat(location.host)}},{key:"resolve",value:function(e){return q||(U=(q=document.implementation.createHTMLDocument("url")).createElement("base"),I=q.createElement("a"),q.head.appendChild(U)),U.href=window.location.protocol+"//"+window.location.host,I.href=e.replace(/ /g,"%20"),I.href.replace(/\/$/,"")}},{key:"match",value:function(e,t){var r=this;if(t instanceof Array){var n=this.resolve(e);return!!H.find(t,function(e){return e instanceof RegExp?!!n.match(e):0===n.indexOf(r.resolve(e))})}return!0===t}},{key:"parse",value:function(e){var t=e.search,r=e.hash,n=[];t&&(n=n.concat(t.replace("?","").split("&"))),r&&(n=n.concat(r.replace("#","").split("&")));var o={};return H.forEach(n,function(e){var r=D(e.split("="),2),n=r[0],i=r[1];o[n]=i}),o}},{key:"url",value:function(e,t){var r=e;return H.forEach(t,function(e,t){H.includes([void 0,null,""],e)||(r+="".concat(-1===r.indexOf("?")?"?":"&").concat(t,"=").concat(encodeURIComponent(e)))}),r}}]),e}(),N={},H=function(){var t;function e(){o(this,e)}return i(e,null,[{key:"includes",value:function(e,t){return -1!==e.indexOf(t)}},{key:"forEach",value:function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],r);else for(var n in e)t(e[n],n)}},{key:"find",value:function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];if(t(n,r))return n}else for(var o in e){var i=e[o];if(t(i,o))return i}return null}},{key:"assign",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this.forEach(r,function(t){for(var r in t)e[r]=t[r]}),e}},{key:"defaults",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return this.forEach(n,function(r){for(var n in r)t.isObject(e[n])&&t.isObject(r[n])?e[n]=t.defaults(e[n],r[n]):void 0===e[n]&&(e[n]=r[n])}),e}},{key:"isObject",value:function(e){return"object"===f(e)&&!Array.isArray(e)}},{key:"iframe",value:(t=n(y.mark(function e(t){var r,n,o,i,a=this;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.redirectUrl,o=t.visible,(i=document.createElement("iframe")).setAttribute("owner","@salte-auth/salte-auth"),o?(this.assign(i.style,{border:"none",bottom:0,height:"100%",left:0,position:"fixed",right:0,top:0,width:"100%",zIndex:9999,opacity:0,transition:"0.5s opacity"}),setTimeout(function(){return i.style.opacity="1"})):i.style.display="none",i.src=r,document.body.appendChild(i),e.abrupt("return",new Promise(function(e,t){var r=setInterval(function(){try{var o=i.contentWindow.location;if(0!==o.href.indexOf(n))return;var c=C.parse(o);a.removeIframe(i),clearInterval(r),e(c)}catch(e1){if(P.isCrossDomainError(e1))return;a.removeIframe(i),clearInterval(r),t(e1)}})}));case 7:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"removeIframe",value:function(e){e.parentElement&&e.parentElement.removeChild(e)}},{key:"debounce",value:function(e,t,r){clearTimeout(N[e]),N[e]=window.setTimeout(function(){delete N[e],t()},r)}}]),e}(),F=function(){function e(t){o(this,e),v(this,"baseKey",void 0),this.baseKey=t}return i(e,[{key:"has",value:function(e){return!H.includes([void 0,null],this.get(e))}},{key:"key",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.baseKey&&-1===e.indexOf(this.baseKey)?"".concat(this.baseKey,".").concat(e):e}}],[{key:"supported",value:function(){return!0}}]),e}(),G=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(){return o(this,r),t1.apply(this,arguments)}return i(r,[{key:"get",value:function(e,t){var r=document.cookie.match(RegExp("".concat(this.key(e),"=([^;]+)"))),n=r&&r[1].trim();return H.includes([void 0,null],n)?H.includes([void 0,null],t)?null:t:n}},{key:"set",value:function(e,t){H.includes([void 0,null],t)?this.delete(e):document.cookie="".concat(this.key(e),"=").concat(t,"; SameSite=Lax")}},{key:"delete",value:function(e){document.cookie="".concat(this.key(e),"=; expires=").concat(new Date(0).toUTCString())}},{key:"clear",value:function(){var e=this,t=this.key(),r=document.cookie.split(";");H.forEach(r,function(r){var o=D(r.trim().split("="),1)[0];0===o.indexOf(t)&&e.delete(o)})}}],[{key:"supported",value:function(){return!0===navigator.cookieEnabled}}]),r}(F),K=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(){return o(this,r),t1.apply(this,arguments)}return i(r,[{key:"get",value:function(e,t){var r=localStorage.getItem(this.key(e));return H.includes([void 0,null],r)?H.includes([void 0,null],t)?null:t:r}},{key:"set",value:function(e,t){H.includes([void 0,null],t)?this.delete(e):localStorage.setItem(this.key(e),t)}},{key:"delete",value:function(e){localStorage.removeItem(this.key(e))}},{key:"clear",value:function(){var e=this.key();for(var t in localStorage)0===t.indexOf(e)&&this.delete(t)}}]),r}(F),Y=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(){return o(this,r),t1.apply(this,arguments)}return i(r,[{key:"get",value:function(e,t){var r=sessionStorage.getItem(this.key(e));return H.includes([void 0,null],r)?H.includes([void 0,null],t)?null:t:r}},{key:"set",value:function(e,t){H.includes([void 0,null],t)?this.delete(e):sessionStorage.setItem(this.key(e),t)}},{key:"delete",value:function(e){sessionStorage.removeItem(this.key(e))}},{key:"clear",value:function(){var e=this.key();for(var t in sessionStorage)0===t.indexOf(e)&&this.delete(t)}}]),r}(F),J={cookie:G,local:K,session:Y},W=Object.freeze({__proto__:null,StorageTypes:J,CookieStorage:G,LocalStorage:K,SessionStorage:Y}),Q=function(){function e(t,r,n){o(this,e),v(this,"raw",void 0),v(this,"expiration",void 0),v(this,"type",void 0),this.raw=t,this.expiration=H.includes([void 0,null],r)?null:Number(r),this.type=n}return i(e,[{key:"expired",get:function(){return!this.raw||this.expiration<=Date.now()}}]),e}(),Z=function(){function e(t){o(this,e),v(this,"raw",void 0),v(this,"user",void 0),this.raw=t,this.user=e.parse(this.raw)}return i(e,[{key:"expired",get:function(){return!this.user||1e3*this.user.exp<=Date.now()}}],[{key:"parse",value:function(e){try{var t=e.split(".");if(3!==t.length)throw new b({code:"invalid_id_token",message:"ID Token didn't match the desired format. ({header}.{payload}.{validation})"});return JSON.parse(atob(t[1].replace(/-/g,"+").replace(/_/g,"/")))}catch(e1){return null}}}]),e}(),ee=function(){function e(t,r){o(this,e),v(this,"name",void 0),v(this,"level",void 0),this.name=t,this.level="string"==typeof r?this.toLevel(r):r}return i(e,[{key:"trace",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.log.apply(this,["trace",e].concat(r))}},{key:"info",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.log.apply(this,["info",e].concat(r))}},{key:"warn",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.log.apply(this,["warn",e].concat(r))}},{key:"error",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.log.apply(this,["error",e].concat(r))}},{key:"log",value:function(e,t){if(this.enabled(e)){for(var r,n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];(r=console).log.apply(r,["".concat(e,": ").concat(t)].concat(o))}}},{key:"enabled",value:function(e){return!1!==this.level&&(!0===this.level||this.level<=this.toLevel(e))}},{key:"toLevel",value:function(t){return H.find(e.levels,function(e,r){return r===t})}}]),e}();v(ee,"levels",{trace:0,info:1,warn:2,error:3});for(var te=function(){function e(){o(this,e)}return i(e,null,[{key:"dedupe",value:function(){var e={};return function(t,r){return e[t]||(e[t]=r().then(function(r){return delete e[t],r}).catch(function(r){throw delete e[t],r})),e[t]}}}]),e}(),re=Object.freeze({__proto__:null,Interceptors:T,StorageHelpers:W,AccessToken:Q,IDToken:Z,Common:H,Events:P,URL:C,Logger:ee,Dedupe:te}),oe=["cookie","session","local"],ie=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(e){o(this,r),v(c(n=t1.call(this,e)),"storage",void 0),n.config=H.defaults(n.config,{storage:H.find(oe,function(e){return J[e].supported()})});var n,i=J[n.config.storage];if(!i)throw new b({code:"invalid_storage",message:"Storage doesn't exist for the given value. (".concat(n.config.storage,")")});return n.storage=new i(n.key),n}return i(r,[{key:"key",get:function(){return"salte.auth"}}]),r}(_),ue=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(e){var n;return o(this,r),(n=t1.call(this,e)).config=H.defaults(n.config,{redirectUrl:location.origin,level:"warn"}),n}return i(r,[{key:"redirectUrl",value:function(e){return"string"==typeof this.config.redirectUrl?this.config.redirectUrl:this.config.redirectUrl[e]}}]),r}(function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(){var e;o(this,r);for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return v(c(e=t1.call.apply(t1,[this].concat(i))),"listeners",new Map),e}return i(r,[{key:"on",value:function(e,t){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(t)}},{key:"off",value:function(e,t){if(this.listeners.has(e)){var r=this.listeners.get(e);if(r.length){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this.listeners.has(e)){var o=this.listeners.get(e);H.forEach(o,function(e){return e.apply(void 0,r)})}}}]),r}(ie)),se=self.crypto||self.msCrypto,le="-_",fe=36;fe--;)le+=fe.toString(36);for(fe=36;fe---10;)le+=fe.toString(36).toUpperCase();var pe=function(e){var t="",r=se.getRandomValues(new Uint8Array(e||21));for(fe=e||21;fe--;)t+=le[63&r[fe]];return t},de=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(e){var n;return o(this,r),v(c(n=t1.call(this,e)),"logger",void 0),v(c(n),"url",C.url),v(c(n),"dedupe",te.dedupe()),n.config=H.defaults(n.config,{validation:!0,level:"warn"}),n.logger=new ee("@salte-auth/salte-auth:providers/".concat(n.$name),n.config.level),n}return i(r,[{key:"validation",value:function(e){return"object"===f(this.config.validation)?!0===this.config.validation[e]:!0===this.config.validation}},{key:"$name",get:function(){return this.config.name||this.name}},{key:"key",get:function(){return"salte.auth.provider.".concat(this.$name)}},{key:"logout",get:function(){throw new b({code:"logout_not_supported",message:"This provider doesn't support logout."})}}]),r}(ue);function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var xe=function(e){s(a,e);var t,t1,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r,n=d(a);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)});function a(e){var t;return o(this,a),v(c(t=r.call(this,e)),"accessToken",void 0),t.sync(),t}return i(a,[{key:"connected",value:function(){this.required("clientID","responseType")}},{key:"secure",value:(t1=n(y.mark(function e(t){return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("token"!==this.config.responseType){e.next=13;break}if(!this.accessToken.expired){e.next=3;break}return e.abrupt("return","login");case 3:if(!t){e.next=13;break}if(!(t instanceof Request)){e.next=8;break}t.headers.set("Authorization","Bearer ".concat(this.accessToken.raw)),e.next=13;break;case 8:if(!(t instanceof XMLHttpRequest)){e.next=12;break}t.setRequestHeader("Authorization","Bearer ".concat(this.accessToken.raw)),e.next=13;break;case 12:throw new b({code:"unknown_request",message:"Unknown request type. (".concat(t,")")});case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}},e,this)})),function(e){return t1.apply(this,arguments)})},{key:"$validate",value:function(e){try{if(!e)throw new b({code:"empty_response",message:"The response provided was empty, this is most likely due to the configured handler not providing it."});if(e.error)throw new b({code:e.error,message:"".concat(e.error_description?e.error_description:e.error).concat(e.error_uri?" (".concat(e.error_uri,")"):"")});var t=e.code,r=e.access_token,n=e.state,o=e.expires_in,i=e.token_type;if(this.validation("state")&&this.storage.get("state")!==n)throw new b({code:"invalid_state",message:"State provided by identity provider did not match local state."});var a=this.storage.get("response-type","").split(" ");if(H.includes(a,"code")){if(!t)throw new b({code:"invalid_code",message:"Expected a code to be returned by the Provider."})}else if(H.includes(a,"token")&&!r)throw new b({code:"invalid_access_token",message:"Expected an access token to be returned by the Provider."});t?(this.storage.set("code.raw",t),this.storage.delete("access-token.raw"),this.storage.delete("access-token.expiration"),this.storage.delete("access-token.type")):r&&(this.storage.set("access-token.raw",r),this.storage.set("access-token.expiration",Date.now()+1e3*Number(o)),this.storage.set("access-token.type",i),this.storage.delete("code.raw"))}finally{this.storage.delete("state")}}},{key:"validate",value:function(e){this.logger.trace("[validate] (options): ",e);try{this.$validate(e)}catch(e1){throw this.emit("login",e1),e1}finally{this.sync()}this.emit("login",null,this.code||this.accessToken)}},{key:"code",get:function(){return this.storage.get("code.raw")}},{key:"$login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(this.$name,"-state-").concat(pe()),r=e.responseType||this.config.responseType;return this.storage.set("state",t),this.storage.set("response-type",r),this.url(this.login,ye(ye({},this.config.queryParams&&this.config.queryParams("login")),{},{client_id:this.config.clientID,response_type:r,redirect_uri:this.redirectUrl("login"),scope:this.config.scope,state:t}))}},{key:"sync",value:function(){this.logger.trace("[sync] updating access token"),this.accessToken=new Q(this.storage.get("access-token.raw"),this.storage.get("access-token.expiration"),this.storage.get("access-token.type"))}}]),a}(de),me=r(function(e){e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0});t(me);var we=t(r(function(e){function t(r,n,o){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=t=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e,t,r){var n=me(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}},e.exports.default=e.exports,e.exports.__esModule=!0),t(r,n,o||r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),be=function(e){s(a,e);var t,t1,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r,n=d(a);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)});function a(e){var t;return o(this,a),v(c(t=r.call(this,e)),"idToken",void 0),t.config.renewal="object"===f(t.config.renewal)?t.config.renewal:{type:t.config.renewal},t.config=H.defaults(t.config,{responseType:"id_token",scope:"openid",renewal:{type:"auto",buffer:6e4}}),t.sync(),t}return i(a,[{key:"secure",value:(t1=n(y.mark(function e(t){var r=this;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.includes(["id_token","id_token token","token"],this.config.responseType)){e.next=17;break}if(!this.idToken.expired){e.next=4;break}return this.logger.trace("[secure]: ID Token has expired, requesting login..."),e.abrupt("return","login");case 4:if(!this.accessToken.expired){e.next=7;break}return e.next=7,this.dedupe("access-token",n(y.mark(function e(){var t;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.logger.info("[secure]: Expired access token detected, retrieving..."),e.next=3,H.iframe({redirectUrl:r.redirectUrl("login"),url:r.$login({prompt:"none",responseType:"token"})});case 3:t=e.sent,r.logger.info("[secure]: Access token retrieved! Validating..."),r.validate(t);case 6:case"end":return e.stop()}},e)})));case 7:if(!t){e.next=17;break}if(!(t instanceof Request)){e.next=12;break}t.headers.set("Authorization","Bearer ".concat(this.accessToken.raw)),e.next=17;break;case 12:if(!(t instanceof XMLHttpRequest)){e.next=16;break}t.setRequestHeader("Authorization","Bearer ".concat(this.accessToken.raw)),e.next=17;break;case 16:throw new b({code:"unknown_request",message:"Unknown request type. (".concat(t,")")});case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}},e,this)})),function(e){return t1.apply(this,arguments)})},{key:"$validate",value:function(e){try{we(d(a.prototype),"$validate",this).call(this,e);var t=e.id_token,r=e.code;if(t){var n=e.id_token,o=Z.parse(n);if(!o)throw new b({code:"invalid_id_token",message:"Failed to parse user information due to invalid id token."});if(this.validation("nonce")&&this.storage.get("nonce")!==o.nonce)throw new b({code:"invalid_nonce",message:"Nonce provided by identity provider did not match the local nonce."});this.storage.set("id-token.raw",n)}else r&&this.storage.delete("id-token.raw")}finally{this.storage.delete("nonce")}}},{key:"validate",value:function(e){this.logger.trace("[validate] (options): ",e);try{this.$validate(e)}catch(e1){throw this.emit("login",e1),e1}finally{this.sync()}var t=this.storage.get("response-type",""),r=t.split(" ");if(H.includes(r,"id_token"))this.emit("login",null,this.idToken);else if(H.includes(r,"token"))this.emit("login",null,this.accessToken);else{if(!H.includes(r,"code"))throw new b({code:"invalid_response_type",message:"Unknown Response Type (".concat(t,")")});this.emit("login",null,this.code)}}},{key:"$login",value:function(e){var t="".concat(this.$name,"-nonce-").concat(pe());return this.storage.set("nonce",t),this.url(we(d(a.prototype),"$login",this).call(this,e),{prompt:e&&e.prompt,nonce:t})}},{key:"sync",value:function(){we(d(a.prototype),"sync",this).call(this),this.logger.trace("[sync] updating id token"),this.idToken=new Z(this.storage.get("id-token.raw"))}}]),a}(xe);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}var Ee=Object.freeze({__proto__:null,OAuth2:function(e){s(r,e);var t=_e(r);function r(e){var n;return o(this,r),(n=t.call(this,e)).required("login"),n}return i(r,[{key:"name",get:function(){return"generic.oauth2"}},{key:"login",get:function(){return this.config.login.apply(this)}}]),r}(xe),OpenID:function(e){s(r,e);var t=_e(r);function r(e){var n;return o(this,r),(n=t.call(this,e)).required("login","logout"),n}return i(r,[{key:"name",get:function(){return"generic.openid"}},{key:"login",get:function(){return this.config.login.apply(this)}},{key:"logout",get:function(){return this.config.logout.apply(this)}}]),r}(be)}),Pe=function(e){s(r,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r1,n=d(r);if(t){var o=d(this).constructor;r1=Reflect.construct(n,arguments,o)}else r1=n.apply(this,arguments);return p(this,r1)});function r(e){var n;return o(this,r),v(c(n=t1.call(this,e)),"logger",void 0),n.config=H.defaults(n.config,{navigate:"reload",level:"warn"}),n.logger=new ee("@salte-auth/salte-auth:handlers/".concat(n.$name),n.config.level),n}return i(r,[{key:"$name",get:function(){return this.config.name||this.name}},{key:"key",get:function(){return"salte.auth.handler.".concat(this.$name)}},{key:"navigate",value:function(e){"history"===this.config.navigate&&0===e.indexOf(C.origin)&&history.pushState("",document.title,e),location.href=e}}]),r}(ie),Te=function(e){s(l,e);var t,t1,r,a,u=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r,n=d(l);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)});function l(e){o(this,l),v(c(t=u.call(this,e)),"logger",void 0),v(c(t),"mixin",void 0),t.required("providers","handlers"),t.config=H.defaults(t.config,{validation:!0,level:"warn"}),t.logger=new ee("@salte-auth/salte-auth:core",t.config.level),H.forEach(t.config.providers,function(e){e.connected&&e.connected(),e.on("login",function(r,n){t.emit("login",r,{provider:e.$name,data:n})}),e.on("logout",function(r){t.emit("logout",r,{provider:e.$name})})});var e1,e2,t,r,i=t.storage.get("action"),a=i?t.provider(t.storage.get("provider")):null,f=i?t.storage.get("handler"):null;if(!H.includes([void 0,null,"login","logout"],i))throw new b({code:"unknown_action",message:"Unable to finish redirect due to an unknown action! (".concat(i,")")});return H.forEach(t.config.handlers,function(e){e.connected&&(e.$name===f?a.dedupe(i,n(y.mark(function r(){var n;return y.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.logger.trace("[constructor]: wrapping up authentication for ".concat(e.$name,"...")),r.next=3,new Promise(function(e){return setTimeout(e)});case 3:n=e.connected({action:i}),"login"===i?(a.validate(n),t.logger.info("[constructor]: login complete")):(a.storage.clear(),a.sync(),a.emit("logout"),t.logger.info("[constructor]: logout complete"));case 5:case"end":return r.stop()}},r)}))):e.connected({action:null}))}),t.storage.delete("action"),t.storage.delete("provider"),t.storage.delete("handler"),R.add((e1=n(y.mark(function e(r){var n,o;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.config.providers.length)){e.next=9;break}if(o=t.config.providers[n],!C.match(r.url,o.config.endpoints)){e.next=6;break}return e.next=6,t.$secure(o,r);case 6:n++,e.next=1;break;case 9:case"end":return e.stop()}},e)})),function(t){return e1.apply(this,arguments)})),j.add((e2=n(y.mark(function e(r){var n,o;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.config.providers.length)){e.next=9;break}if(o=t.config.providers[n],!C.match(r.$url,o.config.endpoints)){e.next=6;break}return e.next=6,t.$secure(o,r);case 6:n++,e.next=1;break;case 9:case"end":return e.stop()}},e)})),function(t){return e2.apply(this,arguments)})),P.route(n(y.mark(function e(){var r,n;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.config.providers.length)){e.next=9;break}if(n=t.config.providers[r],!C.match(location.href,n.config.routes)){e.next=6;break}return e.next=6,t.$secure(n);case 6:r++,e.next=1;break;case 9:case"end":return e.stop()}},e)}))),t.mixin=(r=c(t),function(e){return function(e){s(n,e);var t,t1=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var r,n1=d(n);if(t){var o=d(this).constructor;r=Reflect.construct(n1,arguments,o)}else r=n1.apply(this,arguments);return p(this,r)});function n(){var e;o(this,n);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return v(c(e=t1.call.apply(t1,[this].concat(a))),"auth",void 0),e.auth=r,e.auth.on("login",function(){e.requestUpdate&&e.requestUpdate("auth")}),e.auth.on("logout",function(){e.requestUpdate&&e.requestUpdate("auth")}),e}return n}(e)}),t}return i(l,[{key:"login",value:(a=n(y.mark(function e(t){var r,o,i=this;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"==typeof t?{provider:t}:t,o=this.provider(r.provider),e.abrupt("return",o.dedupe("login",n(y.mark(function e(){var t,n;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.handler(r.handler),e.prev=1,i.storage.set("action","login"),i.storage.set("provider",o.$name),i.storage.set("handler",t.$name),i.logger.info("[login]: logging in with ".concat(o.$name," via ").concat(t.$name,"...")),e.next=8,t.open({redirectUrl:o.redirectUrl("login"),url:o.$login()});case 8:n=e.sent,i.logger.trace("[login]: validating response...",n),o.validate(n),i.logger.info("[login]: login complete");case 12:return e.prev=12,i.storage.delete("action"),i.storage.delete("provider"),i.storage.delete("handler"),e.finish(12);case 17:case"end":return e.stop()}},e,null,[[1,,12,17]])}))));case 3:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"logout",value:(r=n(y.mark(function e(t){var r,o,i=this;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"==typeof t?{provider:t}:t,o=this.provider(r.provider),e.abrupt("return",o.dedupe("logout",n(y.mark(function e(){var t;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=i.handler(r.handler),i.storage.set("action","logout"),i.storage.set("provider",o.$name),i.storage.set("handler",t.$name),i.logger.info("[logout]: logging out with ".concat(o.$name," via ").concat(t.$name,"...")),e.next=8,t.open({redirectUrl:o.redirectUrl("logout"),url:C.url(o.logout,o.config.queryParams&&o.config.queryParams("logout"))});case 8:o.storage.clear(),o.sync(),o.emit("logout"),i.logger.info("[logout]: logout complete"),e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(0),o.emit("logout",e.t0),e.t0;case 18:return e.prev=18,i.storage.delete("action"),i.storage.delete("provider"),i.storage.delete("handler"),e.finish(18);case 23:case"end":return e.stop()}},e,null,[[0,14,18,23]])}))));case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"provider",value:function(e){var t=H.find(this.config.providers,function(t){return t.$name===e});if(!t)throw new b({code:"invalid_provider",message:"Unable to locate provider with the given name. (".concat(e,")")});return t}},{key:"handler",value:function(e){var t=void 0===e?H.find(this.config.handlers,function(e){return Boolean(e.config.default)}):H.find(this.config.handlers,function(t){return t.$name===e});if(!t)throw new b({code:"invalid_handler",message:"Unable to locate handler with the given name. (".concat(e,")")});return t}},{key:"$secure",value:(t1=n(y.mark(function e(t,r){var n,o;return y.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.handler(),o=null;case 2:if(!0===o){e.next=13;break}return e.next=5,t.secure(r);case 5:if("login"!==(o=e.sent)){e.next=11;break}if(n.auto){e.next=9;break}throw new b({code:"auto_unsupported",message:"The default handler doesn't support automatic authentication! (".concat(n.$name,")")});case 9:return e.next=11,this.login({provider:t.$name,handler:n.$name});case 11:e.next=2;break;case 13:case"end":return e.stop()}},e,this)})),function(e,r){return t1.apply(this,arguments)})}]),l}(ue);e.Generic=Ee,e.Handler=Pe,e.OAuth2Provider=xe,e.OpenIDProvider=be,e.Provider=de,e.SalteAuth=Te,e.SalteAuthError=b,e.Utils=re,Object.defineProperty(e,"__esModule",{value:!0})}(exports)},4092:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Tab:function(){return Tab}});var _salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5153);class Tab extends _salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__.Handler{constructor(config){super(config),this.config=_salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__.Utils.Common.defaults(this.config,{window:{name:"@salte-auth/tab"}})}get name(){return"tab"}get auto(){return!1}async open(_ref){var{url,redirectUrl}=_ref,tabWindow=window.open(url,"_blank");if(!tabWindow)throw new _salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__.SalteAuthError({message:"We were unable to open the new tab, its likely that the request was blocked.",code:"tab_blocked"});return tabWindow.name="salte-auth",tabWindow.focus(),new Promise((resolve,reject)=>{var checker=setInterval(()=>{try{if(tabWindow.closed)throw new _salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__.SalteAuthError({message:"The user closed the tab before authentication could be completed.",code:"tab_closed"});var{location:location1}=tabWindow;if(0!==location1.href.indexOf(redirectUrl))return;var parsed=_salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__.Utils.URL.parse(location1);tabWindow.close(),resolve(parsed)}catch(error){if(_salte_auth_salte_auth__WEBPACK_IMPORTED_MODULE_0__.Utils.Events.isCrossDomainError(error))return;tabWindow.closed||tabWindow.close(),clearInterval(checker),reject(error)}},100)})}}}}]);